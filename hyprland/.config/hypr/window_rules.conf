# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules
# You can check classes etc. of current windows with `hyprctl clients`
# See layers: `hyprctl layers`.
# Layers can only be identified with `match:namespace`
# Use `sleep 2; hyprctl layers` and quickly switch if its something that takes focus (e.g. rofi)

source = ~/.config/hypr/workspace-names.conf

windowrule {
    # Ignore maximize requests from all apps. You'll probably like this.
    name = suppress-maximize-events
    match:class = .*

    suppress_event = maximize
}

windowrule {
    # Fix some dragging issues with XWayland
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false

    no_focus = true
}

# Make Goldendict always float, centered, with specific size
# If you resize it, the keep that size.
windowrule {
    name = goldendict
    match:class = io.github.xiaoyifang.goldendict_ng
    size = 800 600
    float = true
    # persistent_size = true
    pin = true
    animation = slide right
}


# Pavucontrol always as a float
windowrule {
    name = pavucontrol
    match:class = org.pulseaudio.pavucontrol
    float = true
    size = 800 600
}

# beeper in its dedicated workspace
windowrule {
    name = beeper
    match:class = BeeperTexts
    workspace = $socialOneN
    # So I do not accidentally doxx myself.
    no_screen_share = true
}
workspace = $socialOneN, on-created-empty: gtk-launch beeper

# Vesktop (discord)
windowrule {
    name = vesktop
    # TODO: is this the correct class? check.
    match:class = vesktop
    workspace = $socialTwoN
}
workspace = $socialTwoN, on-created-empty: vesktop

# The 'new appointment' window normally opens as a new window, tiling up the rest.
# That sucks, so fix it
windowrule {
    name = evolution_popup_float
    match:initial_title = .*Appointment.*
    match:class = org.gnome.Evolution
    float = true
    size = 1000 800
    workspace = $mailN
    center = true
}

# mail in its dedicated workspace
windowrule {
    name = mail-evolution
    match:class = org.gnome.Evolution
    workspace = $mailN
}
workspace = $mailN, on-created-empty: evolution

workspace = special:magic, gapsout:40

# Special music workspace running rmpc
# Not screen filling, starts with rmpc opened.
workspace = special:music, on-created-empty: ghostty -e rmpc 
workspace = special:music, gapsout:160

# Swaync glassmorphic
layerrule {
    name = notifications-menu
    match:class = swaync-control-center
    blur = true
    ignore_alpha = 0
    animation = slide right
}

layerrule {
    name = swaync-popup
    match:namespace = swaync-popup
    ignore_alpha = 0
    no_screen_share = true
}

layerrule {
    name = rofi
    match:namespace = rofi
    blur = true
    ignore_alpha = 0
    animation = fade
}

windowrule {
    name = vintage-story
    match:class = 'Vintage Story'
    fullscreen = true
    maximize = true
}

